<!DOCTYPE html>
<html>
<head>
    <title>CraveControl.org</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/bulma.css">
    <script type="text/javascript" src="js/app.js"></script>
    <style type="text/css">
        html {
            background:#EFEFEF;
        }
    </style>
</head>
<body>
</body>
    <audio id="ping"> <source src="https://www.freesound.org/data/previews/91/91926_7037-lq.mp3" type="audio/mpeg"> </audio>

    <script type="text/javascript">
        function fetch(key) {
            var value = localStorage.getItem(key);
            return value ? value : "";
        }

        var flags = {"token": fetch("token")
                    , "time": Date.now()
                    }

        console.log(flags);

        var app = Elm.Main.fullscreen(flags);

        app.ports.setItem.subscribe(function(keyValue) {
            var [key, value] = keyValue;
            localStorage.setItem(key, value);
        });

        app.ports.removeItem.subscribe(function(key) {
            localStorage.removeItem(key);
        });

        app.ports.clearLocalStorage.subscribe(function(clear) {
            localStorage.clear();
        });

        app.ports.pinger.subscribe(function(model) {
            document.getElementById("ping").play()
        });


    </script>

</html>
